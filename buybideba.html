<script>
    document.addEventListener("DOMContentLoaded", async () => {
        try {
            if (typeof TonConnect === "undefined") {
                throw new Error("TonConnect SDK is not loaded.");
            }

            tonConnect = new TonConnect({
                manifestUrl: "https://your-github-username.github.io/your-repo-name/tonconnect-manifest.json"
            });

            console.log("TonConnect initialized successfully.");

            // Проверяем состояние подключения при загрузке
            tonConnect.onStatusChange((wallet) => {
                const connectButton = document.getElementById("connectButton");
                const buyButton = document.getElementById("buyButton");
                if (wallet && wallet.account) {
                    connectButton.textContent = "Wallet Connected";
                    connectButton.disabled = true;
                    buyButton.disabled = false;
                } else {
                    connectButton.textContent = "Connect TON Space Wallet";
                    connectButton.disabled = false;
                    buyButton.disabled = true;
                }
            });
        } catch (error) {
            console.error("TonConnect initialization error:", error);
            alert("Failed to initialize TonConnect. Please try again later.");
        }
    });
</script>
