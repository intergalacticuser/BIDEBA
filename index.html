<!DOCTYPE html>
<html lang="en">
  <head>
   <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  
  // Устанавливаем consent по умолчанию — всё запрещено
  gtag('consent', 'default', {
    'ad_storage': 'denied',
    'ad_user_data': 'denied',
    'ad_personalization': 'denied',
    'analytics_storage': 'denied',
    'wait_for_update': 1000
  });
</script>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N8MXJRMB');</script>
<!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BDB Coin Official</title>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} 
    gtag('consent', 'default', {
      'ad_storage': 'denied',
      'ad_user_data': 'denied',
      'ad_personalization': 'denied',
      'analytics_storage': 'denied',
      'wait_for_update': 500
    });
    </script>
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://rss.app">
    <link rel="preconnect" href="https://rss.app" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="canonical" href="https://bideba.com/">
    <meta name="description" content="BIDEBA (BDB) — мем-койн на TON. Юмор, фановая комьюнити и быстрые транзакции.">
    <meta property="og:title" content="BIDEBA (BDB) — Official">
    <meta property="og:description" content="Мем-койн на TON. Развлечение и обучение. Не инвестиция.">
    <meta property="og:image" content="logo.png">
    <meta property="og:url" content="https://bideba.com/">
    <meta name="theme-color" content="#00c6ff">
    <style>
      body {
        margin: 0;
        padding: 0;
        background-color: #000;
        color: white;
        font-family: 'Arial', sans-serif;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        position: relative;
      }
      
      .welcome-container {
        text-align: center;
        font-size: 4rem;
        font-weight: bold;
        letter-spacing: 2px;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        opacity: 1;
        transition: opacity 1s ease-out;
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        transform: translateY(-50%);
        width: 100%;
        z-index: 5;
      }
      
      .hidden {
        opacity: 0;
        pointer-events: none;
      }
     
      #ticker-container {
        position: absolute;
        top: 10px;
        left: 0;
        right: 0;
        z-index: 10;
        width: 100%;
        max-width: 100%;
        text-align: center;
        overflow: hidden;
      }
      
      #ticker-container iframe {
        width: 100%;
        max-width: 1000px;
        height: 60px;
        margin: 0 auto;
        display: block;
        border: none;
        background: transparent;
      }
      
      #falling-letters {
        position: absolute;
        top: 70px;
        left: 0;
        width: 100%;
        height: calc(100% - 80px);
        display: block;
        z-index: 5;
      }
      
      /* Menu Style */
      #menu {
        position: absolute;
        top: 75px;
        left: 10px;
        z-index: 20;
      }
      
      #info-button {
        position: absolute;
        top: 75px;
        right: 10px;
        z-index: 20;
      }
      
      #menu button, #info-button button {
        background: rgba(0, 0, 0, 0.8);
        color: white;
        font-size: 1.4rem;
        font-weight: bold;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s ease;
        box-shadow: 0 2px 5px rgba(255, 255, 255, 0.2);
      }
      
      #menu button:hover, #info-button button:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      /* Info Page Styles */
      .info-page {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        min-height: 100vh;
        background-color: #000;
        color: white;
        font-family: 'Arial', sans-serif;
      }
      
      .info-page h1 {
        font-size: 3rem;
        margin-bottom: 20px;
      }
      
      .info-page p {
        font-size: 1.5rem;
        margin-bottom: 20px;
      }
      
      .social-links {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 40px;
      }
      
      .social-links a {
        font-size: 2rem;
        color: white;
        text-decoration: none;
        transition: color 0.3s ease;
      }
      
      .social-links a:hover {
        color: #ff0;
      }
      
      .info-page a {
        color: #00ffff;
        text-decoration: underline;
      }
      
      /* Purchase Interface - Перемещено на 5 мм ниже и уменьшено на 5% */
      .purchase-container {
        position: absolute;
        top: 54%; /* Перемещено ниже (было 52%) */
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 15;
        background: rgba(10, 10, 20, 0.85);
        backdrop-filter: blur(10px);
        border-radius: 19px; /* Уменьшено на 5% (было 20px) */
        padding: 21px; /* Уменьшено на 5% (было 22px) */
        width: 90%;
        max-width: 494px; /* Уменьшено на 5% (было 520px) */
        box-shadow: 0 0 29px rgba(0, 200, 255, 0.3); /* Уменьшено на 5% */
        border: 1px solid rgba(0, 200, 255, 0.3);
        display: none;
        flex-direction: column;
        gap: 17px; /* Уменьшено на 5% (было 18px) */
        max-height: 73vh; /* Уменьшено на 5% (было 77vh) */
        overflow-y: auto;
      }
      
      .purchase-header {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px; /* Уменьшено на 5% (было 13px) */
        margin-bottom: 9px;
      }
      
      .coin-icon {
        width: 48px; /* Уменьшено на 5% (было 51px) */
        height: 48px; /* Уменьшено на 5% (было 51px) */
        background: linear-gradient(135deg, #00c6ff, #0072ff);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 23px; /* Уменьшено на 5% (было 24px) */
      }
      
      .purchase-title {
        font-size: 26px; /* Уменьшено на 5% (было 27px) */
        font-weight: bold;
        background: linear-gradient(to right, #00c6ff, #0072ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-align: center;
      }
      
      .price-display {
        background: rgba(0, 30, 60, 0.7);
        border-radius: 12px; /* Уменьшено на 5% (было 13px) */
        padding: 17px; /* Уменьшено на 5% (было 18px) */
        text-align: center;
        margin-bottom: 9px;
      }
      
      .price-row {
        display: flex;
        justify-content: space-between;
        padding: 7px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }
      
      .price-row:last-child {
        border-bottom: none;
      }
      
      .price-label {
        color: #aaa;
        font-size: 15px; /* Уменьшено на 5% (было 16px) */
      }
      
      .price-value {
        font-weight: bold;
        color: #00c6ff;
        font-size: 15px; /* Уменьшено на 5% (было 16px) */
      }
      
      .purchase-form {
        display: flex;
        flex-direction: column;
        gap: 12px; /* Уменьшено на 5% (было 13px) */
      }
      
      .form-group {
        display: flex;
        flex-direction: column;
        gap: 7px;
      }
      
      .form-label {
        font-size: 15px; /* Уменьшено на 5% (было 16px) */
        color: #ddd;
      }
      
      .input-group {
        display: flex;
        background: rgba(0, 20, 40, 0.7);
        border-radius: 10px;
        overflow: hidden;
        border: 1px solid rgba(0, 200, 255, 0.3);
      }
      
      .input-group input {
        flex: 1;
        background: transparent;
        border: none;
        padding: 11px; /* Уменьшено на 5% (было 12px) */
        color: white;
        font-size: 15px; /* Уменьшено на 5% (было 16px) */
        outline: none;
      }
      
      .input-group select {
        background: rgba(0, 40, 80, 0.7);
        border: none;
        padding: 0 11px; /* Уменьшено на 5% (было 12px) */
        color: white;
        font-size: 13px; /* Уменьшено на 5% (было 14px) */
        outline: none;
        cursor: pointer;
      }
      
      .result-display {
        background: rgba(0, 30, 60, 0.7);
        border-radius: 12px; /* Уменьшено на 5% */
        padding: 17px; /* Уменьшено на 5% */
        text-align: center;
        margin: 9px 0;
      }
      
      .result-row {
        display: flex;
        justify-content: space-between;
        padding: 7px 0;
      }
      
      .result-label {
        color: #aaa;
        font-size: 15px; /* Уменьшено на 5% */
      }
      
      .result-value {
        font-weight: bold;
        color: #00c6ff;
        font-size: 16px; /* Уменьшено на 5% (было 17px) */
      }
      
      .wallet-info {
        background: rgba(0, 30, 60, 0.7);
        border-radius: 12px; /* Уменьшено на 5% */
        padding: 11px; /* Уменьшено на 5% */
        text-align: center;
        margin-top: 8px; /* Уменьшено на 5% */
      }
      
      .wallet-address {
        font-family: monospace;
        font-size: 10px; /* Уменьшено на 5% */
        word-break: break-all;
        margin: 8px 0;
        color: #00c6ff;
      }
      
      .connect-button, .buy-button {
        background: linear-gradient(135deg, #00c6ff, #0072ff);
        color: white;
        border: none;
        padding: 13px; /* Уменьшено на 5% */
        border-radius: 10px;
        font-size: 15px; /* Уменьшено на 5% */
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 8px;
      }
      
      .connect-button:hover, .buy-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 198, 255, 0.4);
      }
      
      .connect-button:active, .buy-button:active {
        transform: translateY(0);
      }
      
      .swap-info {
        background: rgba(0, 30, 60, 0.7);
        border-radius: 12px; /* Уменьшено на 5% */
        padding: 11px; /* Уменьшено на 5% */
        text-align: center;
        font-size: 12px;
        color: #aaa;
        margin-top: 8px;
      }
      
      .swap-info i {
        color: #00c6ff;
        margin-right: 4px;
      }
      
      .close-button {
        position: absolute;
        top: 11px; /* Уменьшено на 5% */
        right: 11px; /* Уменьшено на 5% */
        background: rgba(255, 50, 50, 0.3);
        color: white;
        border: none;
        width: 26px; /* Уменьшено на 5% */
        height: 26px; /* Уменьшено на 5% */
        border-radius: 50%;
        cursor: pointer;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px; /* Уменьшено на 5% */
      }
      
      .notification {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 30, 60, 0.9);
        border: 1px solid rgba(0, 200, 255, 0.5);
        border-radius: 10px;
        padding: 15px 25px;
        z-index: 100;
        display: none;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }
      
      .notification.show {
        display: block;
        animation: fadeInOut 3s ease;
      }
      
      @keyframes fadeInOut {
        0% { opacity: 0; bottom: 0; }
        10% { opacity: 1; bottom: 20px; }
        90% { opacity: 1; bottom: 20px; }
        100% { opacity: 0; bottom: 0; }
      }
      
      /* Purchase Button */
      .purchase-button {
        position: absolute;
        top: 47%;
        left: 90%;
        transform: translate(-50%, -50%);
        z-index: 12;
        background: linear-gradient(135deg, #00c6ff, #0072ff);
        color: white;
        border: none;
        border-radius: 50%;
        width: 72px;
        height: 72px;
        font-size: 26px;
        cursor: pointer;
        box-shadow: 0 0 20px rgba(0, 198, 255, 0.7);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: pulse 2s infinite;
      }
      
      .purchase-button:hover {
        transform: translate(-50%, -50%) scale(1.1);
        box-shadow: 0 0 30px rgba(0, 198, 255, 0.9);
      }
      
      @keyframes pulse {
        0% { box-shadow: 0 0 0 0 rgba(0, 198, 255, 0.7); }
        70% { box-shadow: 0 0 0 15px rgba(0, 198, 255, 0); }
        100% { box-shadow: 0 0 0 0 rgba(0, 198, 255, 0); }
      }
      
      /* Contract Info */
      .contract-info {
        background: rgba(0, 30, 60, 0.7);
        border-radius: 12px; /* Уменьшено на 5% */
        padding: 11px; /* Уменьшено на 5% */
        text-align: center;
        margin-top: 8px;
        font-size: 12px;
      }
      
      .contract-address {
        font-family: monospace;
        font-size: 10px;
        word-break: break-all;
        margin: 7px 0;
        color: #00c6ff;
      }
      
      /* Scrollbar styling */
      .purchase-container::-webkit-scrollbar {
        width: 8px;
      }
      
      .purchase-container::-webkit-scrollbar-track {
        background: rgba(0, 20, 40, 0.5);
        border-radius: 5px;
      }
      
      .purchase-container::-webkit-scrollbar-thumb {
        background: rgba(0, 198, 255, 0.5);
        border-radius: 5px;
      }
      
      .purchase-container::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 198, 255, 0.7);
      }
      
      /* Добавляем прокрутку для всей страницы */
      html {
        scroll-behavior: smooth;
      }
      
      
      
      /* Добавляем контент для возможности прокрутки */
      .content-spacer {
        height: 100vh;
        width: 100%;
      }
      
      /* Responsive adjustments */
      @media (max-width: 768px) {
        .welcome-container {
          font-size: 2.5rem;
        }
        
        .purchase-container {
          width: 95%;
          padding: 15px;
          top: 54%; /* Перемещено ниже на мобильных устройствах */
        }
        
        .purchase-title {
          font-size: 20px;
        }
        
        .purchase-button {
          width: 60px;
          height: 60px;
          font-size: 22px;
          top: 47%;
          left: 90%;
        }
      }
    </style>
    <script defer src="app.js"></script>
  </head>
  <body>
    <nav class="navbar">
      <a class="brand" href="index.html"><img src="logo.png" alt="BDB">BIDEBA</a>
      <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="magazine.html">Magazine</a>
        <a href="info.html">Info</a>
        <a href="Privacy.html">Privacy</a>
        <a href="Terms.html">Terms</a>
        <a href="https://x.com/bdbcoin?s=21" target="_blank" rel="noopener" aria-label="X (Twitter)" title="X (Twitter)"><i class="fa-brands fa-x-twitter"></i></a>
        <a href="https://t.me/BIDEBAcoin" target="_blank" rel="noopener" aria-label="Telegram" title="Telegram"><i class="fa-brands fa-telegram"></i></a>
      </div>
    </nav>
    <div class="nav-spacer"></div>
    <script>
      (function(){
        try {
          if (localStorage.getItem('cookiesAccepted')) {
            gtag('consent', 'update', {
              'ad_storage': 'granted',
              'ad_user_data': 'granted',
              'ad_personalization': 'granted',
              'analytics_storage': 'granted'
            });
          }
        } catch(e){}
      })();
    </script>
    
    <!-- Home Page -->
    
    <div id="ticker-container">
      <iframe 
        width="100%" 
        height="60" 
        src="https://rss.app/embed/v1/ticker/_XzrDDuW8zJzoioSc" 
        frameborder="0"
        scrolling="no"
        allowfullscreen
      ></iframe>
    </div>

    <div class="welcome-container" id="welcome-text">BIDEBA Coin Official <br> @BDBcoin</div>
    <canvas id="falling-letters"></canvas>

    <!-- Purchase Button -->
    <button class="purchase-button" id="purchase-button">
      <i class="fas fa-coins"></i>
    </button>

    <!-- Purchase Interface (Перемещено на 5 мм ниже и уменьшено на 5%) -->
    <div class="purchase-container" id="purchase-container">
      <button class="close-button" onclick="closePurchase()">×</button>
      
      <div class="purchase-header">
        <div class="coin-icon">
          <i class="fas fa-coins"></i>
        </div>
        <h2 class="purchase-title">BDB Coin Purchase</h2>
      </div>
      
      <div class="price-display">
        <div class="price-row">
          <span class="price-label">BDB Coin Price:</span>
          <span class="price-value" id="bdb-price">$0.000012</span>
        </div>
        <div class="price-row">
          <span class="price-label">In TON:</span>
          <span class="price-value" id="bdb-ton">0.00000012 TON</span>
        </div>
        <div class="price-row">
          <span class="price-label">TON Price:</span>
          <span class="price-value" id="ton-price">$5.23</span>
        </div>
      </div>
      
      <div class="purchase-form">
        <div class="form-group">
          <label class="form-label">Amount to Buy:</label>
          <div class="input-group">
            <input type="number" id="amount" placeholder="Enter amount" min="1" value="10">
            <select id="currency-select">
              <option value="ton">TON</option>
              <option value="usdt">USDT</option>
            </select>
          </div>
        </div>
        
        <!-- Результат расчета -->
        <div class="result-display">
          <div class="result-row">
            <span class="result-label">You will receive:</span>
            <span class="result-value" id="bdb-amount">83,333.00 BDB</span>
          </div>
          <div class="result-row">
            <span class="result-label">Exchange rate:</span>
            <span class="result-value" id="exchange-rate">1 TON = 8,333.00 BDB</span>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Your Wallet Address:</label>
          <div class="input-group">
            <input type="text" id="wallet-address" placeholder="Enter your TON wallet address">
          </div>
        </div>
        
        <button class="connect-button" id="connect-wallet">
          <i class="fas fa-wallet"></i> Connect Wallet
        </button>
        
        <button class="buy-button" id="buy-button">
          <i class="fas fa-shopping-cart"></i> Buy BDB Coins
        </button>
        
        <div class="swap-info">
          <i class="fas fa-exchange-alt"></i> When paying with USDT, we'll automatically swap to TON using TonFi
        </div>
      </div>
      
      <div class="wallet-info">
        <p>Send your payment to this address:</p>
        <div class="wallet-address" id="payment-address">EQCAwyYlz3E4l5vovfl3OXU_3OpgpL9tZUUjZYaOnrQFqz-8</div>
        <p>After payment, your BDB coins will be sent to your wallet</p>
      </div>
      
      <div class="contract-info">
        <p>BDB Coin Smart Contract:</p>
        <div class="contract-address">EQCAwyYlz3E4l5vovfl3OXU_3OpgpL9tZUUjZYaOnrQFqz-8</div>
        <p><a href="https://tonviewer.com/EQCAwyYlz3E4l5vovfl3OXU_3OpgpL9tZUUjZYaOnrQFqz-8" target="_blank" style="color: #00c6ff;">View on TonViewer</a></p>
      </div>
    </div>
    
    <div class="notification" id="notification">
      <span id="notification-text">Wallet connected successfully!</span>
    </div>

    <!-- Info Page -->
    <div class="info-page" id="info-page" style="display: none;">
      <h1>About BDB Coin</h1>
      <p>BDB Coin is a decentralized cryptocurrency designed for fast, secure, and affordable transactions.</p>
      <div class="social-links">
        <a href="https://x.com/bdbcoin" target="_blank">X</a>
        <a href="https://t.me/bdbcoin" target="_blank">Telegram</a>
      </div>
      <p>For more information, visit our <a href="https://bdbcoin.com" target="_blank">official website</a>.</p>
    </div>

    

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        try {
          const welcomeText = document.getElementById('welcome-text');
          const canvas = document.getElementById('falling-letters');
          const purchaseContainer = document.getElementById('purchase-container');
          const purchaseButton = document.getElementById('purchase-button');
          const notification = document.getElementById('notification');
          const connectButton = document.getElementById('connect-wallet');
          const buyButton = document.getElementById('buy-button');
          const amountInput = document.getElementById('amount');
          const currencySelect = document.getElementById('currency-select');
          const walletAddressInput = document.getElementById('wallet-address');
          const bdbAmountElement = document.getElementById('bdb-amount');
          const exchangeRateElement = document.getElementById('exchange-rate');
          
          // Set the contract address
          const contractAddress = "EQCAwyYlz3E4l5vovfl3OXU_3OpgpL9tZUUjZYaOnrQFqz-8";
          document.getElementById('payment-address').textContent = contractAddress;
          
          // Фиксированные цены (в реальном приложении будут получены из API)
          let bdbPriceInUSD = 0.000012;
          try { window.__BDB_PRICE_USD__ = bdbPriceInUSD; } catch (e) {}
          let tonPriceInUSD = 5.23;
          let bdbPriceInTON = bdbPriceInUSD / tonPriceInUSD;
          
          // Получение цены TON с CoinGecko
          async function fetchTONPrice() {
            try {
              const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=the-open-network&vs_currencies=usd');
              const data = await response.json();
              if (data['the-open-network'] && data['the-open-network'].usd) {
                tonPriceInUSD = data['the-open-network'].usd;
                bdbPriceInTON = bdbPriceInUSD / tonPriceInUSD;
                updatePrices();
                return true;
              }
            } catch (error) {
              console.error('Error fetching TON price from CoinGecko:', error);
            }
            return false;
          }
          
          // Получение цены BDB (в реальном приложении будет из вашего API)
          async function fetchBDBPrice() {
            try {
              // Здесь будет ваш API для получения цены BDB
              // Пока используем фиксированную цену вместо случайной
              // bdbPriceInUSD = (Math.random() * 0.00002 + 0.000005); // Старый случайный код
              // Новая фиксированная цена (в реальном приложении будет из API)
              updatePrices();
              return true;
            } catch (error) {
              console.error('Error fetching BDB price:', error);
            }
            return false;
          }
          
          // Обновляем отображение цен
          function updatePrices() {
            document.getElementById('bdb-price').textContent = `$${bdbPriceInUSD.toFixed(8)}`;
            document.getElementById('ton-price').textContent = `$${tonPriceInUSD.toFixed(2)}`;
            document.getElementById('bdb-ton').textContent = `${bdbPriceInTON.toFixed(10)} TON`;
            updateExchangeRate();
            calculateBDBAmount();
          }
          
          // Обновляем курс обмена с двумя знаками после запятой
          function updateExchangeRate() {
            const currency = currencySelect.value;
            if (currency === 'ton') {
              // Форматируем курс с двумя знаками после запятой
              exchangeRateElement.textContent = `1 TON = ${parseFloat((1 / bdbPriceInTON).toFixed(2)).toLocaleString()} BDB`;
            } else {
              // Форматируем курс с двумя знаками после запятой
              exchangeRateElement.textContent = `1 USDT = ${parseFloat((1 / bdbPriceInUSD).toFixed(2)).toLocaleString()} BDB`;
            }
          }
          
          // Расчет количества BDB с двумя знаками после запятой
          function calculateBDBAmount() {
            const amount = parseFloat(amountInput.value) || 0;
            const currency = currencySelect.value;
            
            let bdbAmount;
            if (currency === 'ton') {
              bdbAmount = amount / bdbPriceInTON;
            } else {
              bdbAmount = amount / bdbPriceInUSD;
            }
            
            // Форматируем число с двумя знаками после запятой и разделителями тысяч
            bdbAmountElement.textContent = `${bdbAmount.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",")} BDB`;
          }
          
          // Слушатели событий
          amountInput.addEventListener('input', calculateBDBAmount);
          currencySelect.addEventListener('change', () => {
            updateExchangeRate();
            calculateBDBAmount();
          });
          
          if (!canvas || !welcomeText) {
            console.error("Error: Missing required elements in the DOM.");
            return;
          }
          
          const ctx = canvas.getContext('2d');
          if (!ctx) {
            console.error("Error: Canvas context not supported.");
            return;
          }
          
          // Purchase button event
          purchaseButton.addEventListener('click', () => {
            purchaseContainer.style.display = 'flex';
          });
          
          function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight - 80;
          }
          
          resizeCanvas();
          window.addEventListener('resize', resizeCanvas);

          const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
          const fontSize = Math.max(12, Math.min(25, window.innerWidth / 40));
          const columns = Math.floor(canvas.width / (fontSize * 0.7));
          const drops = [];
          const trailLength = 3;
          const glowIntensity = 10;
          let pulseFactor = 1;
          let pulseDirection = 1;
          
          for (let i = 0; i < columns; i++) {
            drops[i] = { y: 1, trail: [] };
          }
          
          let speedState = 0;
          const speedLevels = [0.6, 0.8, 1.0, 1.2, 0.4];

          function drawFallingLetters() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.font = `${fontSize}px Arial`;
            pulseFactor += pulseDirection * 0.05;
            if (pulseFactor >= 1.5 || pulseFactor <= 0.5) {
              pulseDirection *= -1;
            }
            for (let i = 0; i < drops.length; i++) {
              const text = letters[Math.floor(Math.random() * letters.length)];
              const x = i * fontSize * 0.7;
              const y = drops[i].y * fontSize;
              const h = Math.random() * 360;
              const s = 70 + Math.random() * 30;
              const l = 50 + Math.random() * 20;
              const glowSize = glowIntensity * pulseFactor;
              ctx.shadowBlur = glowSize;
              ctx.shadowColor = `hsl(${h}, ${s}%, ${l}%)`;
              ctx.fillStyle = `hsl(${h}, ${s}%, ${l - 10}%)`;
              ctx.fillText(text, x, y);
              drops[i].trail.push({ x, y, alpha: 1 });
              while (drops[i].trail.length > trailLength) {
                drops[i].trail.shift();
              }
              drops[i].trail.forEach((point, index) => {
                const alpha = 0.4 - (index / trailLength);
                ctx.globalAlpha = alpha;
                ctx.fillStyle = `hsla(${h}, ${s}%, ${l - 10}%, ${alpha})`;
                ctx.fillText(text, point.x, point.y);
              });
              ctx.globalAlpha = 1;
              if (y > canvas.height || Math.random() > 0.97) {
                drops[i].y = 0;
                drops[i].trail = [];
              }
              drops[i].y += speedLevels[speedState];
            }
            ctx.shadowBlur = 0;
            ctx.shadowColor = 'transparent';
          }
          
          canvas.addEventListener('mousedown', () => {
            speedState = (speedState + 1) % speedLevels.length;
            console.log(`Current speed state: ${speedState}`);
          });
          
          setTimeout(() => {
            welcomeText.classList.add('hidden');
            setInterval(drawFallingLetters, 30);
          }, 5000);
          
          // Initial price update
          updatePrices();
          
          // Получаем актуальные цены при открытии виджета
          purchaseButton.addEventListener('click', async () => {
            purchaseContainer.style.display = 'flex';
            await fetchTONPrice();
            await fetchBDBPrice();
          });
          
          // Периодическое обновление цен (каждые 30 секунд)
          setInterval(async () => {
            await fetchTONPrice();
            // await fetchBDBPrice(); // Закомментировано для стабильности цены
          }, 30000);
          
          // Wallet connection
          connectButton.addEventListener('click', () => {
            if (walletAddressInput.value.trim() === '') {
              showNotification('Please enter your wallet address first');
              return;
            }
            
            // Simulate wallet connection
            connectButton.innerHTML = '<i class="fas fa-check"></i> Connected';
            connectButton.disabled = true;
            showNotification('Wallet connected successfully!');
          });
          
          // Purchase functionality
          buyButton.addEventListener('click', () => {
            const amount = amountInput.value;
            const currency = currencySelect.value;
            const walletAddress = walletAddressInput.value.trim();
            
            if (amount <= 0) {
              showNotification('Please enter a valid amount');
              return;
            }
            
            if (walletAddress === '') {
              showNotification('Please enter your wallet address');
              return;
            }
            
            if (connectButton.disabled === false) {
              showNotification('Please connect your wallet first');
              return;
            }
            
            // Simulate purchase
            showNotification(`Purchase initiated: ${amount} ${currency.toUpperCase()} for BDB coins`);
            
            // In a real app, this would initiate the transaction
            setTimeout(() => {
              showNotification('Transaction confirmed! Coins sent to your wallet.');
            }, 3000);
          });
          
          // Show notification
          function showNotification(message) {
            document.getElementById('notification-text').textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
              notification.classList.remove('show');
            }, 3000);
          }
          
          // Close purchase interface
          window.closePurchase = function() {
            purchaseContainer.style.display = 'none';
          };
          
        } catch (error) {
          console.error("An error occurred in the script:", error);
        }
      });
   
  </script>
 <!-- GDPR + Crypto Disclaimer Consent Banner -->
<div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #1a1a2e; color: #fff; padding: 18px; font-size: 14px; z-index: 10000; display: none; font-family: Arial, sans-serif; border-top: 1px solid #00c6ff;">
  <div style="max-width: 980px; margin: 0 auto; display: flex; flex-direction: column; gap: 12px; line-height: 1.5;">

    <div>
      <strong>Cookie & Data Consent</strong>: This website uses minimal cookies to enhance your experience and support technical functionality. No personal data is stored or shared without your explicit consent. Analytics are disabled by default and only activated after your approval, in compliance with the <strong>GDPR</strong>.
    </div>

    <div style="background: rgba(255, 0, 0, 0.1); padding: 12px; border-radius: 8px; border: 1px solid rgba(255, 0, 0, 0.2);">
      <strong>⚠️ Important Crypto Disclaimer:</strong> The token <strong>BIDEBA Coin (BDB)</strong> is a <strong>meme coin</strong> created for entertainment and community fun on the TON blockchain. It has:
      <ul style="margin: 8px 0; padding-left: 20px;">
        <li>No financial value, utility, or guarantees.</li>
        <li>No legal status as an investment, security, or regulated digital asset (MiCA).</li>
        <li>No affiliation with financial institutions.</li>
      </ul>
      All transactions are <strong>irreversible and at your own risk</strong>. For full details, see our <a href="/Privacy.html" style="color: #0bf; text-decoration: underline;">Privacy & Disclaimer Policy</a>.
    </div>

    <div style="font-size: 13px; color: #aaa; background: rgba(0, 0, 0, 0.3); padding: 10px; border-radius: 6px;">
      <strong>Smart Contract:</strong> <span style="font-family: monospace;">EQAcB3z-Eggn9SblOqy5OEf0GAmVGs0kSHICwpwjRPIPpwIw</span>
    </div>

    <label style="display: flex; align-items: center; gap: 10px; font-size: 15px;">
      <input type="checkbox" id="investment-checkbox" style="transform: scale(1.3); cursor: pointer;" required>
      <span>I understand that <strong>BDB is a meme coin</strong> and <strong>I am not making an investment</strong>.</span>
    </label>

    <button id="accept-cookies" disabled style="background: linear-gradient(135deg, #00c6ff, #0072ff); color: white; border: none; padding: 12px 20px; font-size: 16px; font-weight: bold; cursor: not-allowed; border-radius: 6px; max-width: 200px; align-self: flex-start; transition: all 0.3s ease;">
      I Understand & Agree
    </button>

  </div>
</div>

<script>
  (function () {
    const cookieBanner = document.getElementById('cookie-banner');
    const acceptBtn = document.getElementById('accept-cookies');
    const investmentCheckbox = document.getElementById('investment-checkbox');

    if (!localStorage.getItem('cookiesAccepted')) {
      cookieBanner.style.display = 'block';
    }

    investmentCheckbox.addEventListener('change', function () {
      acceptBtn.disabled = !this.checked;
      acceptBtn.style.cursor = this.checked ? 'pointer' : 'not-allowed';
    });

    acceptBtn.addEventListener('click', function () {
      if (!investmentCheckbox.checked) return;

      localStorage.setItem('cookiesAccepted', 'true');
      cookieBanner.style.display = 'none';

      // Разрешаем аналитику
      gtag('consent', 'update', {
        'ad_storage': 'granted',
        'ad_user_data': 'granted',
        'ad_personalization': 'granted',
        'analytics_storage': 'granted'
      });

      // Событие для GTM
      window.dataLayer.push({ 'event': 'cookie_consent_given' });
    });
  })();
</script>

  </body>
</html>
